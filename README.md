**Лабораторная работа 7. Регистрация и поиск сервиса в реестре jUDDI**

# Регистрация и поиск сервиса в реестре jUDDI

## Задание

Разработать приложение, осуществляющее регистрацию сервиса в реестре jUDDI, а также поиск сервиса в реестре и обращение к нему. 

Необходимо реализовать консольное приложение, которое обрабатывает 2 команды:

* Первая - регистрация сервиса в реестре.
* Вторая - поиск сервиса и обращение к нему.



## Ход работы

В данной работе необходимо скачать Apache jUDDI (реестр сервисов) по ссылке:

http://archive.apache.org/dist/juddi/juddi/3.2.0/

Таким образом мы получим последнюю версию jUDDI 3.3.9. Для Windows необходимо скачать zip-архив и распаковать его. Далее переходим в директории распакованного архива в каталог `juddi-tomcat-3.3.9/bin` и запускаем через файл `startup.bat`. Как правило, стоит запускать НЕ от имени администратора. При необходимости можно переименовать файл startup.bat или создать ярлык, а затем добавить его в переменную Path и производить запуск из консоли, например, по ключевому слову juddi. Необходимо иметь свободный порт 8080. Далее переходим по необходимому адресу:

* Для просмотра информации и администрирования - http://localhost:8080/juddiv3
* Для доступа к GUI - http://localhost:8080/juddi-gui

> Также имеется доступ по SSL через порт 8443 и сервер занимает IP 0.0.0.0, то есть должен быть доступен из всех "открытых" сетей. Но для доступа по SSL необходимо будет установить соответствующий сертификат.



![image-20210611092150976](README.assets/image-20210611092150976.png)

![image-20210611092204348](README.assets/image-20210611092204348.png)



В директории `\juddi-tomcat-3.3.9\conf` можно просмотреть пользователя по умолчанию в строках:

```xml
...
<role rolename="uddiadmin"/>
<user username="uddiadmin" password="da_password1" roles="uddiadmin,tomcat,manager" />
...
```

Следует их изменить следующим образом:

```xml
<tomcat-users>
    <role rolename="tomcat"/>
    <role rolename="manager"/>
    <role rolename="uddiadmin"/>
    <user username="uddiadmin" password="da_password1" roles="uddiadmin,tomcat,manager" />
</tomcat-users>
```

Далее перезапускаем jUDDI и используем указанные имя пользователя и пароль для входа в панель администрирования и gui.

 Попробуем зарегистрировать сервис через графический интерфейс в браузере, для чего изначально создаем во вкладке Create -> Business новый "бизнес" и далее во вкладке Create ->Register Services from WSDL создаем новый сервис, но для регистрации изначально его запустим - выбираем сервис из лабораторной работы 3, изменяем порт, например, на 8090, т. к. tomcat использует порт 8080 по умолчанию, и запускаем сервис. Далее производим его регистрацию. После успешной регистрации мы можем его найти и просмотреть через Discover -> Search.

![image-20210611124235683](README.assets/image-20210611124235683.png)

![image-20210611215409021](README.assets/image-20210611215409021.png)

![image-20210611215541028](README.assets/image-20210611215541028.png)

![image-20210611124433110](README.assets/image-20210611124433110.png)

Далее приступаем к программной реализации клиента, причем изначально попытаем написать часть для поиска сервиса и обращения к нему. После этого приступим к реализации части с регистрацией сервиса в реестре.



## Поиск сервиса и обращение к нему

В pom.xml добавляем зависимости:

```xml
	<dependencies>
		<dependency>
			<groupId>org.apache.juddi</groupId>
			<artifactId>uddi-ws</artifactId>
			<version>3.2.0</version>
		</dependency>
		<dependency>
			<groupId>org.apache.juddi</groupId>
			<artifactId>juddi-client</artifactId>
			<version>3.2.0</version>
		</dependency>
	</dependencies>
```

Для поиска сервиса будем следовать представленному в методическом пособии примеру "simple-browse" из каталога examples jUDDI. Создадим для поиска сервиса класс ServiceSearch, в котором объявим метод searchServiceByName, который будет возвращать указатель на сервис, а принимать в качестве аргумента имя сервиса для поиска.



